<app-navbar></app-navbar>
<div class="container">
  <h2>Recuparar Contraseña</h2>
  <div class="p-3 p-lg-5 border">
    <form class="form" #loginForm="ngForm" (ngSubmit)="sendMail()" id="sendMail" novalidate *ngIf="isSendMail">
      <div class="form-row">
        <div class="form-group col-md-12 text-center">
          <label for="username">Username</label>
          <div class="form-group input-group">
            <input type="text" class="form-control col-md-6 mx-auto" name="username" id="username"
                   placeholder="Introduce tu Username"
                   [(ngModel)]="user.username" #username="ngModel"
                   [ngClass]="{'is-invalid':loginForm.submitted && username.invalid}" required>
          </div>
        </div>
        <button type="submit" class="btn btn-outline-success mx-auto" form="sendMail">Enviar</button>
      </div>
    </form>


    <form class="form" #loginForm="ngForm" (ngSubmit)="onSubmit()" id="change" novalidate *ngIf="!isSendMail">
      <div ngModelGroup="passwords">
        <div class="form-group">
          <div class="text-center">
            <label for="password">Contraseña</label>
            <input type="text" class="form-control col-lg-6 mx-auto" name="password" id="password"
                   placeholder="Introduce tu Contraseña"
                   [(ngModel)]="user.password" #password="ngModel"
                   [ngClass]="{'is-invalid':loginForm.submitted && password.invalid}" required>
            <div class="alert alert-danger col-lg-6 mx-auto"
                 *ngIf="loginForm?.controls.passwords?.controls.password?.errors?.required&&loginForm?.controls.passwords?.controls.password?.touched">
              Este campo es obligatorio
            </div>
          </div>
        </div>

        <div class="form-group">
          <div class="text-center">
            <label for="confirmPassword"></label>
            <input type="text" class="form-control col-lg-6 mx-auto" name="confirmPassword"
                   placeholder="Verificar Contraseña"
                   ngModel required>
            <div class="alert alert-danger col-lg-6 mx-auto"
                 *ngIf="loginForm?.controls?.passwords.controls?.confirmPassword.errors?.required&&loginForm?.controls?.passwords.controls?.confirmPassword?.touched">
              Este campo es obligatorio
            </div>
            <div class="alert alert-danger col-lg-6 text-center mx-auto"
                 *ngIf="loginForm.controls?.passwords.controls?.password.value != loginForm.controls?.passwords.controls?.confirmPassword.value">
              Contraseñas no son iguales
            </div>
          </div>
        </div>
      </div>
      <div class="text-center">
        <button type="submit" class="btn btn-primary" [disabled]="loginForm?.invalid" form="change">Cambiar
          Contraseña
        </button>
      </div>
    </form>
  </div>
</div>
